

apply plugin: 'gwt-base'

dependencies {
    compile project(':core:model')
    compile libraries.guava
    compile libraries.gwt.user
    compile libraries.gwt.dev

    gwt     libraries.gwt.guava

}

test {
    exclude '**/*GwtTest*'
}


jar {
    from project.sourceSets.main.allSource
    from project.sourceSets.main.output
    from("$projectDir/src/super/java") {
        into "elemental/super"
    }
}




task testGwt(type: JavaExec) {

    dependsOn compileTestJava

    classpath configurations.gwtSdk
    classpath configurations.gwt

    classpath "$projectDir/src/super/java"
    classpath sourceSets.main.java.srcDirs
    classpath sourceSets.main.resources.srcDirs
    classpath sourceSets.main.runtimeClasspath
    classpath sourceSets.main.output.generatedSourcesDir
    classpath sourceSets.test.java.srcDirs
    classpath sourceSets.test.runtimeClasspath
    classpath configurations.testCompile

    main = 'junit.textui.TestRunner'

    jvmArgs "-Dgwt.args=-prod -style pretty -war ${buildDir}/testWar -workDir ${buildDir}/testGwtWork"
    args 'elemental.json.JsonUtilGwtTest'

}
