
apply plugin: "sonar-runner"


sonarRunner {
    sonarProperties {
        property "sonar.host.url", "http://sonar.bedatadriven.com"
        property "sonar.jdbc.url", "jdbc:mysql://localhost/sonardb"
        property "sonar.jdbc.driverClassName", "com.mysql.jdbc.Driver"
        property "sonar.jdbc.username", "sonar"
        property "sonar.jdbc.password", sonarDatabasePassword
    }
}


repositories {
    mavenCentral()
}

gradle.taskGraph.whenReady { graph ->
    if (project.hasProperty("coverage") || graph.hasTask('sonarRunner')) {

        subprojects {
            apply plugin: 'jacoco'
        }
//        
//        project(':server') {
//            apply plugin: 'jacoco'
//
//            def agentFile = jacoco.agent.agentJar
//            def destPath = "${project.buildDir}/jacoco/${task.name}.exec"
//            
//            appengineStartAT.jvmArgs.add "-javaagent:${agentFile}=destfile=${destPath}"
//        }
    }
}
